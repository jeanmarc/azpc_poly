<html>
<head><title>Polygon drawer</title></head>
<script>

function drawPolygon() {
    var form = document.getElementById("input_form");
    var data = form.elements["poly_input"].value;

    var debugField = form.elements["debug"];

    var vertices = data.replace(/\s/g, '').split(/[()]+/).filter(function(e) { return e.length > 2; });
    vertices.push(vertices[0]);
    debugField.value = vertices;

    var c = document.getElementById("canvas");

    var zoomFactor = c.width / vertices.length;

    var ctx = c.getContext("2d");
    console.log("clearing " + c.width + " by " + c.height);
    ctx.clearRect(0, 0, c.width, c.height);

    drawPoly( vertices, ctx, zoomFactor);
}

function drawPoly( vertices, ctx, zoomFactor) {
    var numEdges = vertices.length;
    var startEdge = vertices[0].split(',');
    ctx.beginPath();
    drawVertice( startEdge[0], startEdge[1], ctx, zoomFactor);
    for (var i = 1; i < numEdges; i++){
        var endEdge = vertices[i].split(',');
        drawEdge(startEdge[0], startEdge[1], endEdge[0], endEdge[1], ctx, zoomFactor);
        startEdge = endEdge;
        drawVertice( startEdge[0], startEdge[1], ctx, zoomFactor);
    }
    ctx.closePath();
}

function drawEdge(x1, y1, x2, y2, ctx, f = 4) {
    ctx.beginPath();
    ctx.strokeStyle = "#000000"
    ctx.moveTo(f*x1, f*y1);
    ctx.lineTo(f*x2, f*y2);
    ctx.stroke();
    ctx.closePath();
}

function drawVertice( x, y, ctx, f = 4) {
    var d = Math.min(f / 10, 3);
    ctx.beginPath();
    ctx.strokeStyle = "#AA3333"
    ctx.moveTo(f*x,     f*y - d);
    ctx.lineTo(f*x + d, f*y);
    ctx.lineTo(f*x    , f*y + d);
    ctx.lineTo(f*x - d, f*y);
    ctx.lineTo(f*x    , f*y - d);
    ctx.lineTo(f*x    , f*y + d);
    ctx.lineTo(f*x    , f*y);
    ctx.lineTo(f*x - d, f*y);
    ctx.lineTo(f*x + d, f*y);
    ctx.stroke();
    ctx.closePath();
}

</script>
<body>
<h1>Polygon drawing canvas</h1>
<form id="input_form">
    <div>
        <p>Paste a set of vertices in the input box and press
            <span onclick="drawPolygon()">Draw</span>
        </p>
        <p>Use zoomfactor<input name="zoom" value="10"></p>
    </div>
    <textarea name="poly_input" title="Polygon input" cols="80" rows="10">(1,2), (2,6), (3,4), (4,5), (6,3), (5,1)</textarea>
    <textarea name="debug" title="Debug area" cols="80" rows="10"></textarea>
    <canvas id="canvas" width="800" height="800" style="border:2px solid #993333;"></canvas>
</form>
</body>
</html>